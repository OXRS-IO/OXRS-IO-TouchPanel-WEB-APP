import{o,c as r,a as n,t as d,b as h,w as k,v as U,d as q,p as g,e as p,n as v,f as w,F as c,g as u,h as m,r as H,i as $}from"./index.js";var f=(e,t)=>{const i=e.__vccOpts||e;for(const[s,l]of t)i[s]=l;return i};const O={data(){return{host:null,port:null,username:null,password:null,device:null,prefix:null,suffix:null,ssl:null,dt:new Date(this.$root.$version),changed:!1,error:this.$root.error}},watch:{host:{handler:function(e){return this.hasChanged(e,this.$root.host)},deep:!0},port:{handler:function(e){return this.hasChanged(e,this.$root.port)},deep:!0},username:{handler:function(e){return this.hasChanged(e,this.$root.device)},deep:!0},password:{handler:function(e){return this.hasChanged(e,this.$root.username)},deep:!0},device:{handler:function(e){return this.hasChanged(e,this.$root.password)},deep:!0},prefix:{handler:function(e){return this.hasChanged(e,this.$root.prefix)},deep:!0},suffix:{handler:function(e){return this.hasChanged(e,this.$root.suffix)},deep:!0},ssl:{handler:function(e){return this.hasChanged(e,this.$root.ssl)},deep:!0}},created(){this.$watch(()=>this.$root.error,()=>{this.error=this.$root.error})},methods:{submit(){return this.$root.error=null,this.$root.host=host.value,this.$root.port=port.value,this.$root.device=device.value,this.$root.username=username.value,this.$root.password=password.value,this.$root.prefix=prefix.value,this.$root.suffix=suffix.value,this.$root.ssl=!!ssl.checked,this.$root.connectMqtt(),!1},updateForm(){host.value=this.$root.host,port.value=this.$root.port,username.value=this.$root.username,password.value=this.$root.password,device.value=this.$root.device,prefix.value=this.$root.prefix,suffix.value=this.$root.suffix,ssl.checked=this.$root.ssl},hasChanged(e,t){e!=t&&(this.changed=!0)},fullscreen(){this.$root.toggleFullscreen()},cancel(){this.$root.error=null,this.$root.navigateToUrl("/")}},mounted(){this.updateForm(),this.$root.setBgColour({r:0,g:0,b:0})}},y=e=>(g("data-v-01c5a594"),e=e(),p(),e),j={action:"",bp:"container"},F=y(()=>n("h2",{class:"logo-before"},"MQTT broker\xA0configuration",-1)),N={key:0,class:"messages"},A={class:"error"},X={bp:"grid"},Y={bp:"12 9@lg"},G=y(()=>n("label",{for:"host"},"Host: IP address or hostname of your broker's websocket",-1)),Q={bp:"12 3@lg"},J=y(()=>n("label",{for:"port"},"Port:",-1)),K={bp:"grid"},Z={bp:"12 6@lg"},x=y(()=>n("label",{for:"username"},"Username:",-1)),ee={bp:"12 6@lg"},te=y(()=>n("label",{for:"password"},"Password:",-1)),ie={bp:"grid vertical-end"},se={bp:"12 9@lg"},ne=y(()=>n("label",{for:"device"},"Client ID:",-1)),oe={bp:"12 3@lg"},le={for:"ssl",class:"form-checkbox"},re=y(()=>n("span",{class:"checkmark"},null,-1)),ue=y(()=>n("span",{class:"label"},"Enable SSL",-1)),he={bp:"grid"},ae={bp:"12 6@lg"},de=y(()=>n("label",{for:"prefix"},"Topic prefix:",-1)),be={bp:"12 6@lg"},ve=y(()=>n("label",{for:"suffix"},"Topic suffix:",-1));function ce(e,t,i,s,l,b){return o(),r("form",j,[F,l.error?(o(),r("ul",N,[n("li",A,d(l.error),1)])):h("",!0),n("p",null,"Build: "+d(`${l.dt.getUTCFullYear()}-${l.dt.getUTCMonth()+1}-${l.dt.getUTCDate()} ${l.dt.getUTCHours()}:${l.dt.getUTCMinutes()}:${l.dt.getUTCSeconds()}`)+" UTC",1),n("div",X,[n("div",Y,[G,k(n("input",{type:"text",name:"host","onUpdate:modelValue":t[0]||(t[0]=a=>l.host=a),id:"host",placeholder:"192.168.1.123, localhost, xyz.com"},null,512),[[U,l.host]])]),n("div",Q,[J,k(n("input",{type:"text",name:"port","onUpdate:modelValue":t[1]||(t[1]=a=>l.port=a),id:"port",placeholder:"9001"},null,512),[[U,l.port]])])]),n("div",K,[n("div",Z,[x,k(n("input",{type:"text",name:"user","onUpdate:modelValue":t[2]||(t[2]=a=>l.username=a),id:"username"},null,512),[[U,l.username]])]),n("div",ee,[te,k(n("input",{type:"password",name:"password","onUpdate:modelValue":t[3]||(t[3]=a=>l.password=a),id:"password"},null,512),[[U,l.password]])])]),n("div",ie,[n("div",se,[ne,k(n("input",{type:"text",name:"device","onUpdate:modelValue":t[4]||(t[4]=a=>l.device=a),id:"device",placeholder:"TouchPanelWeb"},null,512),[[U,l.device]])]),n("div",oe,[n("label",le,[k(n("input",{type:"checkbox",name:"ssl","onUpdate:modelValue":t[5]||(t[5]=a=>l.ssl=a),id:"ssl",value:"1"},null,512),[[q,l.ssl]]),re,ue])])]),n("div",he,[n("div",ae,[de,k(n("input",{type:"text",name:"prefix","onUpdate:modelValue":t[6]||(t[6]=a=>l.prefix=a),id:"prefix"},null,512),[[U,l.prefix]])]),n("div",be,[ve,k(n("input",{type:"text",name:"suffix","onUpdate:modelValue":t[7]||(t[7]=a=>l.suffix=a),id:"suffix"},null,512),[[U,l.suffix]])])]),n("button",{class:"right icon icon--before icon-_fullscreen",type:"button",onClick:t[8]||(t[8]=(...a)=>b.fullscreen&&b.fullscreen(...a))},"Fullscreen"),!this.$root.mqtt||!this.$root.mqtt.isConnected()||this.changed?(o(),r("button",{key:1,onClick:t[9]||(t[9]=(...a)=>b.submit&&b.submit(...a)),type:"button",class:"submit"},"Connect")):h("",!0),this.$root.mqtt&&this.$root.mqtt.isConnected()?(o(),r("button",{key:2,class:"icon icon--before icon-_left",type:"button",onClick:t[10]||(t[10]=(...a)=>b.cancel&&b.cancel(...a))},"Cancel")):h("",!0)])}var me=f(O,[["render",ce],["__scopeId","data-v-01c5a594"]]);const L=e=>(g("data-v-e519d3fe"),e=e(),p(),e),$e=["id"],ge=L(()=>n("div",{class:"image"},null,-1)),pe={bp:"12",class:"label"},fe=L(()=>n("br",null,null,-1)),we={class:"buttons"},ye=["disabled"],ke={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval))},mouseUp(){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press():this.interval=500,this.animation="bounce-animation")},mouseHold(){this.hold(),clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation"},press(){let e={};e.screen=this.tile.screen,e.tile=this.tile.id,e.style=this.tile.style,e.type="button",e.state=this.tile.state,e.event="single",this.$root.mqttSend(e)},hold(){let e={};e.screen=this.tile.screen,e.tile=this.tile.id,e.style=this.tile.style,e.type="button",e.state=this.tile.state,e.event="hold",this.$root.mqttSend(e)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},Ue=Object.assign(ke,{__name:"ButtonDefault",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:v(`tile state-${e.tile.state} button-${e.tile.style} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:m(t.cssVars),ref:"tileheight"},[ge,e.tile.icon?(o(),r("div",{key:0,bp:"4",class:v(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):h("",!0),n("div",pe,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[fe,n("span",null,d(e.tile.subLabel),1)],64)):h("",!0)]),n("div",we,[n("button",{onMousedown:i[0]||(i[0]=(...s)=>t.mouseDown&&t.mouseDown(...s)),onMouseup:i[1]||(i[1]=(...s)=>t.mouseUp&&t.mouseUp(...s)),onMouseout:i[2]||(i[2]=(...s)=>t.mouseUp&&t.mouseUp(...s)),onTouchstart:i[3]||(i[3]=u((...s)=>t.mouseDown&&t.mouseDown(...s),["prevent"])),onTouchend:i[4]||(i[4]=u((...s)=>t.mouseUp&&t.mouseUp(...s),["prevent"])),disabled:!e.tile.enabled},null,40,ye)])],14,$e))}});var Me=f(Ue,[["__scopeId","data-v-e519d3fe"]]);const T=e=>(g("data-v-b13380ea"),e=e(),p(),e),Ce=["id"],De=T(()=>n("div",{class:"image"},null,-1)),ze={bp:"12",class:"label"},He=T(()=>n("br",null,null,-1)),Le={class:"buttons"},Te=["disabled"],Ie=["disabled"],Se=["disabled"],_e={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(e){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval,e))},mouseUp(e){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press(e):this.interval=500,this.animation="bounce-animation")},mouseHold(e){this.interval=200,this.hold(e),e=="button"&&(clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation")},press(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e,t.event="single",e){case"button":t.state=this.tile.state;break}this.$root.mqttSend(t)},hold(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e,t.event="hold",e){case"button":t.state=this.tile.state;break}this.$root.mqttSend(t)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},Re=Object.assign(_e,{__name:"ButtonUpDown",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:v(`tile state-${e.tile.state} button-${e.tile.style} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:m(t.cssVars),ref:"tileheight"},[De,e.tile.icon?(o(),r("div",{key:0,bp:"4",class:v(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):h("",!0),n("div",ze,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[He,n("span",null,d(e.tile.subLabel),1)],64)):h("",!0)]),n("div",Le,[n("button",{onMousedown:i[0]||(i[0]=s=>t.mouseDown("button")),onMouseup:i[1]||(i[1]=s=>t.mouseUp("button")),onMouseout:i[2]||(i[2]=s=>t.mouseUp("button")),onTouchstart:i[3]||(i[3]=u(s=>t.mouseDown("button"),["prevent"])),onTouchend:i[4]||(i[4]=u(s=>t.mouseUp("button"),["prevent"])),disabled:!e.tile.enabled},null,40,Te),n("button",{onMousedown:i[5]||(i[5]=s=>t.mouseDown("up")),onMouseup:i[6]||(i[6]=s=>t.mouseUp("up")),onMouseout:i[7]||(i[7]=s=>t.mouseUp("up")),onTouchstart:i[8]||(i[8]=u(s=>t.mouseDown("up"),["prevent"])),onTouchend:i[9]||(i[9]=u(s=>t.mouseUp("up"),["prevent"])),class:"icon--mask icon-_up",disabled:!e.tile.enabled},null,40,Ie),n("button",{onMousedown:i[10]||(i[10]=s=>t.mouseDown("down")),onMouseup:i[11]||(i[11]=s=>t.mouseUp("down")),onMouseout:i[12]||(i[12]=s=>t.mouseUp("down")),onTouchstart:i[13]||(i[13]=u(s=>t.mouseDown("down"),["prevent"])),onTouchend:i[14]||(i[14]=u(s=>t.mouseUp("down"),["prevent"])),class:"icon--mask icon-_down",disabled:!e.tile.enabled},null,40,Se)])],14,Ce))}});var Ve=f(Re,[["__scopeId","data-v-b13380ea"]]);const I=e=>(g("data-v-a9bf2c0a"),e=e(),p(),e),Be=["id"],Pe=I(()=>n("div",{class:"image"},null,-1)),We=I(()=>n("br",null,null,-1)),Ee={class:"buttons"},qe=["disabled"],Oe=["disabled"],je=["disabled"],Fe={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(e){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval,e))},mouseUp(e){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press(e):this.interval=500,this.animation="bounce-animation")},mouseHold(e){this.interval=200,this.hold(e),e=="button"&&(clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation")},press(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e=="button"?"button":"level",t.event=e=="button"?"single":e,e){case"up":this.tile.level=Math.max(this.tile.level-1,this.tile.levelStart),t.state=this.tile.level,this.tile.update({});break;case"down":this.tile.level=Math.min(this.tile.level+1,this.tile.levelStop),t.state=this.tile.level,this.tile.update({});break;default:t.state=this.tile.state;break}this.$root.mqttSend(t)},hold(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e=="button"?"button":"level",t.event=e=="button"?"hold":e,e){case"up":this.tile.level=Math.max(this.tile.level-this.tile.levelPercentStep,this.tile.levelStart),t.state=this.tile.level,this.tile.update({});break;case"down":this.tile.level=Math.min(this.tile.level+this.tile.levelPercentStep,this.tile.levelStop),t.state=this.tile.level,this.tile.update({});break;default:t.state=this.tile.state;break}this.$root.mqttSend(t)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},Ne=Object.assign(Fe,{__name:"ButtonLevelDown",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:v(`tile state-${e.tile.state} button-${e.tile.style} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:m(t.cssVars),ref:"tileheight"},[Pe,n("div",{class:"level",style:m({height:e.tile.levelPercent+"%"})},null,4),e.tile.icon?(o(),r("div",{key:0,bp:"4",class:v(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):h("",!0),n("div",{bp:"12",class:v(e.tile.levelPercent<=85?"label invert":"label")},[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[We,n("span",null,d(e.tile.subLabel),1)],64)):h("",!0)],2),n("div",Ee,[n("button",{onMousedown:i[0]||(i[0]=s=>t.mouseDown("button")),onMouseup:i[1]||(i[1]=s=>t.mouseUp("button")),onMouseout:i[2]||(i[2]=s=>t.mouseUp("button")),onTouchstart:i[3]||(i[3]=u(s=>t.mouseDown("button"),["prevent"])),onTouchend:i[4]||(i[4]=u(s=>t.mouseUp("button"),["prevent"])),disabled:!e.tile.enabled},null,40,qe),n("button",{onMousedown:i[5]||(i[5]=s=>t.mouseDown("up")),onMouseup:i[6]||(i[6]=s=>t.mouseUp("up")),onMouseout:i[7]||(i[7]=s=>t.mouseUp("up")),onTouchstart:i[8]||(i[8]=u(s=>t.mouseDown("up"),["prevent"])),onTouchend:i[9]||(i[9]=u(s=>t.mouseUp("up"),["prevent"])),class:"icon--mask icon-_up",disabled:!e.tile.enabled},null,40,Oe),n("button",{onMousedown:i[10]||(i[10]=s=>t.mouseDown("down")),onMouseup:i[11]||(i[11]=s=>t.mouseUp("down")),onMouseout:i[12]||(i[12]=s=>t.mouseUp("down")),onTouchstart:i[13]||(i[13]=u(s=>t.mouseDown("down"),["prevent"])),onTouchend:i[14]||(i[14]=u(s=>t.mouseUp("down"),["prevent"])),class:"icon--mask icon-_down",disabled:!e.tile.enabled},null,40,je)])],14,Be))}});var Ae=f(Ne,[["__scopeId","data-v-a9bf2c0a"]]);const S=e=>(g("data-v-00a62064"),e=e(),p(),e),Xe=["id"],Ye=S(()=>n("div",{class:"image"},null,-1)),Ge=S(()=>n("br",null,null,-1)),Qe={class:"buttons"},Je=["disabled"],Ke=["disabled"],Ze=["disabled"],xe={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(e){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval,e))},mouseUp(e){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press(e):this.interval=500,this.animation="bounce-animation")},mouseHold(e){this.interval=200,this.hold(e),e=="button"&&(clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation")},press(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e=="button"?"button":"level",t.event=e=="button"?"single":e,e){case"up":this.tile.level=Math.min(this.tile.level+1,this.tile.levelStop),t.state=this.tile.level,this.tile.update({});break;case"down":this.tile.level=Math.max(this.tile.level-1,this.tile.levelStart),t.state=this.tile.level,this.tile.update({});break;default:t.state=this.tile.state;break}this.$root.mqttSend(t)},hold(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e=="button"?"button":"level",t.event=e=="button"?"hold":e,e){case"up":this.tile.level=Math.min(this.tile.level+this.tile.levelPercentStep,this.tile.levelStop),t.state=this.tile.level,this.tile.update({});break;case"down":this.tile.level=Math.max(this.tile.level-this.tile.levelPercentStep,this.tile.levelStart),t.state=this.tile.level,this.tile.update({});break;default:t.state=this.tile.state;break}this.$root.mqttSend(t)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},et=Object.assign(xe,{__name:"ButtonLevelUp",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:v(`tile state-${e.tile.state} button-${e.tile.style} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:m(t.cssVars),ref:"tileheight"},[Ye,n("div",{class:"level",style:m({height:e.tile.levelPercent+"%"})},null,4),e.tile.icon?(o(),r("div",{key:0,bp:"4",class:v(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):h("",!0),n("div",{bp:"12",class:v(e.tile.levelPercent<=10?"label invert":"label")},[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[Ge,n("span",null,d(e.tile.subLabel),1)],64)):h("",!0)],2),n("div",Qe,[n("button",{onMousedown:i[0]||(i[0]=s=>t.mouseDown("button")),onMouseup:i[1]||(i[1]=s=>t.mouseUp("button")),onMouseout:i[2]||(i[2]=s=>t.mouseUp("button")),onTouchstart:i[3]||(i[3]=u(s=>t.mouseDown("button"),["prevent"])),onTouchend:i[4]||(i[4]=u(s=>t.mouseUp("button"),["prevent"])),disabled:!e.tile.enabled},null,40,Je),n("button",{onMousedown:i[5]||(i[5]=s=>t.mouseDown("up")),onMouseup:i[6]||(i[6]=s=>t.mouseUp("up")),onMouseout:i[7]||(i[7]=s=>t.mouseUp("up")),onTouchstart:i[8]||(i[8]=u(s=>t.mouseDown("up"),["prevent"])),onTouchend:i[9]||(i[9]=u(s=>t.mouseUp("up"),["prevent"])),class:"icon--mask icon-_up",disabled:!e.tile.enabled},null,40,Ke),n("button",{onMousedown:i[10]||(i[10]=s=>t.mouseDown("down")),onMouseup:i[11]||(i[11]=s=>t.mouseUp("down")),onMouseout:i[12]||(i[12]=s=>t.mouseUp("down")),onTouchstart:i[13]||(i[13]=u(s=>t.mouseDown("down"),["prevent"])),onTouchend:i[14]||(i[14]=u(s=>t.mouseUp("down"),["prevent"])),class:"icon--mask icon-_down",disabled:!e.tile.enabled},null,40,Ze)])],14,Xe))}});var tt=f(et,[["__scopeId","data-v-00a62064"]]);const _=e=>(g("data-v-39f9b01a"),e=e(),p(),e),it=["id"],st=_(()=>n("div",{class:"image"},null,-1)),nt={bp:"12",class:"label"},ot=_(()=>n("br",null,null,-1)),lt={class:"buttons"},rt=["disabled"],ut=["disabled"],ht=["disabled"],at={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(e){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval,e))},mouseUp(e){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press(e):this.interval=500,this.animation="bounce-animation")},mouseHold(e){this.interval=200,this.hold(e),e=="button"&&(clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation")},press(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e,t.event="single",e){case"button":t.state=this.tile.state;break}this.$root.mqttSend(t)},hold(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e,t.event="hold",e){case"button":t.state=this.tile.state;break}this.$root.mqttSend(t)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},dt=Object.assign(at,{__name:"ButtonLeftRight",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:v(`tile state-${e.tile.state} button-${e.tile.style} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:m(t.cssVars),ref:"tileheight"},[st,e.tile.icon?(o(),r("div",{key:0,bp:"4",class:v(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):h("",!0),n("div",nt,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[ot,n("span",null,d(e.tile.subLabel),1)],64)):h("",!0)]),n("div",lt,[n("button",{onMousedown:i[0]||(i[0]=s=>t.mouseDown("button")),onMouseup:i[1]||(i[1]=s=>t.mouseUp("button")),onMouseout:i[2]||(i[2]=s=>t.mouseUp("button")),onTouchstart:i[3]||(i[3]=u(s=>t.mouseDown("button"),["prevent"])),onTouchend:i[4]||(i[4]=u(s=>t.mouseUp("button"),["prevent"])),disabled:!e.tile.enabled},null,40,rt),n("button",{onMousedown:i[5]||(i[5]=s=>t.mouseDown("left")),onMouseup:i[6]||(i[6]=s=>t.mouseUp("left")),onMouseout:i[7]||(i[7]=s=>t.mouseUp("left")),onTouchstart:i[8]||(i[8]=u(s=>t.mouseDown("left"),["prevent"])),onTouchend:i[9]||(i[9]=u(s=>t.mouseUp("left"),["prevent"])),class:"icon--mask icon-_left",disabled:!e.tile.enabled},null,40,ut),n("button",{onMousedown:i[10]||(i[10]=s=>t.mouseDown("right")),onMouseup:i[11]||(i[11]=s=>t.mouseUp("right")),onMouseout:i[12]||(i[12]=s=>t.mouseUp("right")),onTouchstart:i[13]||(i[13]=u(s=>t.mouseDown("right"),["prevent"])),onTouchend:i[14]||(i[14]=u(s=>t.mouseUp("right"),["prevent"])),class:"icon--mask icon-_right",disabled:!e.tile.enabled},null,40,ht)])],14,it))}});var bt=f(dt,[["__scopeId","data-v-39f9b01a"]]);const R=e=>(g("data-v-7cf7427a"),e=e(),p(),e),vt=["id"],ct=R(()=>n("div",{class:"image"},null,-1)),mt={bp:"12",class:"label"},$t=R(()=>n("br",null,null,-1)),gt={class:"buttons"},pt=["disabled"],ft=["disabled"],wt=["disabled"],yt={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(e){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval,e))},mouseUp(e){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press(e):this.interval=500,this.animation="bounce-animation")},mouseHold(e){this.interval=200,this.hold(e),e=="button"&&(clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation")},press(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e,t.event="single",e){case"button":t.state=this.tile.state;break}this.$root.mqttSend(t)},hold(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e,t.event="hold",e){case"button":t.state=this.tile.state;break}this.$root.mqttSend(t)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},kt=Object.assign(yt,{__name:"ButtonPrevNext",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:v(`tile state-${e.tile.state} button-${e.tile.style} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:m(t.cssVars),ref:"tileheight"},[ct,e.tile.icon?(o(),r("div",{key:0,bp:"4",class:v(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):h("",!0),n("div",mt,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[$t,n("span",null,d(e.tile.subLabel),1)],64)):h("",!0)]),n("div",gt,[n("button",{onMousedown:i[0]||(i[0]=s=>t.mouseDown("button")),onMouseup:i[1]||(i[1]=s=>t.mouseUp("button")),onMouseout:i[2]||(i[2]=s=>t.mouseUp("button")),onTouchstart:i[3]||(i[3]=u(s=>t.mouseDown("button"),["prevent"])),onTouchend:i[4]||(i[4]=u(s=>t.mouseUp("button"),["prevent"])),disabled:!e.tile.enabled},null,40,pt),n("button",{onMousedown:i[5]||(i[5]=s=>t.mouseDown("prev")),onMouseup:i[6]||(i[6]=s=>t.mouseUp("prev")),onMouseout:i[7]||(i[7]=s=>t.mouseUp("prev")),onTouchstart:i[8]||(i[8]=u(s=>t.mouseDown("up"),["prevent"])),onTouchend:i[9]||(i[9]=u(s=>t.mouseUp("up"),["prevent"])),class:"icon--mask icon-_prev",disabled:!e.tile.enabled},null,40,ft),n("button",{onMousedown:i[10]||(i[10]=s=>t.mouseDown("next")),onMouseup:i[11]||(i[11]=s=>t.mouseUp("next")),onMouseout:i[12]||(i[12]=s=>t.mouseUp("next")),onTouchstart:i[13]||(i[13]=u(s=>t.mouseDown("down"),["prevent"])),onTouchend:i[14]||(i[14]=u(s=>t.mouseUp("down"),["prevent"])),class:"icon--mask icon-_next",disabled:!e.tile.enabled},null,40,wt)])],14,vt))}});var Ut=f(kt,[["__scopeId","data-v-7cf7427a"]]);const V=e=>(g("data-v-2dc522ac"),e=e(),p(),e),Mt=["id"],Ct=V(()=>n("div",{class:"image"},null,-1)),Dt={bp:"12",class:"label"},zt=V(()=>n("br",null,null,-1)),Ht={class:"buttons"},Lt=["disabled"],Tt={data(){return{tile_height:null,icon_height:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{press(){!this.tile.enabled||this.$root.navigateToUrl(`/screen/${this.tile.link}`)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},It=Object.assign(Tt,{__name:"ButtonLink",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:v(`tile state-${e.tile.state} button-${e.tile.style} enabled-${e.tile.enabled}`),id:e.tile.id,style:m(t.cssVars),ref:"tileheight"},[Ct,e.tile.icon?(o(),r("div",{key:0,bp:"4",class:v(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):h("",!0),n("div",Dt,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[zt,n("span",null,d(e.tile.subLabel),1)],64)):h("",!0)]),n("div",Ht,[n("button",{onClick:i[0]||(i[0]=(...s)=>t.press&&t.press(...s)),class:"icon--mask icon-_right",disabled:!e.tile.enabled},null,8,Lt)])],14,Mt))}});var St=f(It,[["__scopeId","data-v-2dc522ac"]]);const B=e=>(g("data-v-5b16b458"),e=e(),p(),e),_t=["id"],Rt=B(()=>n("div",{class:"image"},null,-1)),Vt={bp:"12",class:"indicator"},Bt={bp:"12",class:"label"},Pt=B(()=>n("br",null,null,-1)),Wt={data(){return{tile_height:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`}}},methods:{resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},Et=Object.assign(Wt,{__name:"ButtonIndicator",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:v(`tile state-${e.tile.state} button-${e.tile.style} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,ref:"tileheight"},[Rt,n("div",Vt,[n("h1",null,[w(d(e.tile.value),1),n("sup",null,d(e.tile.units),1)]),n("h2",null,[w(d(e.tile.subValue),1),n("sup",null,d(e.tile.subUnits),1)])]),n("div",Bt,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[Pt,n("span",null,d(e.tile.subLabel),1)],64)):h("",!0)])],10,_t))}});var qt=f(Et,[["__scopeId","data-v-5b16b458"]]);const P=e=>(g("data-v-2dd4b22a"),e=e(),p(),e),Ot=["id"],jt=P(()=>n("div",{class:"image"},null,-1)),Ft={bp:"12",class:"label"},Nt=P(()=>n("br",null,null,-1)),At={class:"buttons"},Xt=["disabled"],Yt={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval))},mouseUp(){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press():this.interval=500,this.animation="bounce-animation")},mouseHold(){this.hold(),clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation"},press(){this.$root.navigateToUrl(`/screen/${this.tile.screen}/tile/${this.tile.id}/controls`)},hold(){let e={};e.screen=this.tile.screen,e.tile=this.tile.id,e.style=this.tile.style,e.type="button",e.state=this.tile.state,e.event="hold",this.$root.mqttSend(e)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},Gt=Object.assign(Yt,{__name:"ButtonPickerRgb",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:v(`tile state-${e.tile.state} button-${e.tile.style} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:m(t.cssVars),ref:"tileheight"},[jt,e.tile.icon?(o(),r("div",{key:0,bp:"4",class:v(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):h("",!0),n("div",Ft,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[Nt,n("span",null,d(e.tile.subLabel),1)],64)):h("",!0)]),n("div",At,[n("button",{onMousedown:i[0]||(i[0]=(...s)=>t.mouseDown&&t.mouseDown(...s)),onMouseup:i[1]||(i[1]=(...s)=>t.mouseUp&&t.mouseUp(...s)),onMouseout:i[2]||(i[2]=(...s)=>t.mouseUp&&t.mouseUp(...s)),onTouchstart:i[3]||(i[3]=u((...s)=>t.mouseDown&&t.mouseDown(...s),["prevent"])),onTouchend:i[4]||(i[4]=u((...s)=>t.mouseUp&&t.mouseUp(...s),["prevent"])),disabled:!e.tile.enabled},null,40,Xt)])],14,Ot))}});var Qt=f(Gt,[["__scopeId","data-v-2dd4b22a"]]);const W=e=>(g("data-v-50522b51"),e=e(),p(),e),Jt=["id"],Kt=W(()=>n("div",{class:"image"},null,-1)),Zt={bp:"12",class:"label"},xt=W(()=>n("br",null,null,-1)),ei={class:"buttons"},ti=["disabled"],ii={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval))},mouseUp(){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press():this.interval=500,this.animation="bounce-animation")},mouseHold(){this.hold(),clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation"},press(){this.$root.navigateToUrl(`/screen/${this.tile.screen}/tile/${this.tile.id}/controls`)},hold(){let e={};e.screen=this.tile.screen,e.tile=this.tile.id,e.style=this.tile.style,e.type="button",e.state=this.tile.state,e.event="hold",this.$root.mqttSend(e)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},si=Object.assign(ii,{__name:"ButtonDropDown",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:v(`tile state-${e.tile.state} button-${e.tile.style} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:m(t.cssVars),ref:"tileheight"},[Kt,e.tile.icon?(o(),r("div",{key:0,bp:"4",class:v(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):h("",!0),n("div",Zt,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[xt,n("span",null,d(e.tile.subLabel),1)],64)):h("",!0)]),n("div",ei,[n("button",{onMousedown:i[0]||(i[0]=(...s)=>t.mouseDown&&t.mouseDown(...s)),onMouseup:i[1]||(i[1]=(...s)=>t.mouseUp&&t.mouseUp(...s)),onMouseout:i[2]||(i[2]=(...s)=>t.mouseUp&&t.mouseUp(...s)),onTouchstart:i[3]||(i[3]=u((...s)=>t.mouseDown&&t.mouseDown(...s),["prevent"])),onTouchend:i[4]||(i[4]=u((...s)=>t.mouseUp&&t.mouseUp(...s),["prevent"])),disabled:!e.tile.enabled},null,40,ti)])],14,Jt))}});var ni=f(si,[["__scopeId","data-v-50522b51"]]);const oi=n("div",{class:"footer-pad"},"\xA0",-1),li={key:0},ri={key:4},ui={created(){this.$watch(()=>this.$route.params,()=>{this.fetchTiles(),this.updateScreen()},{immediate:!0}),this.$watch(()=>this.$root.screens[this.$route.params.screen],()=>{this.fetchTiles()},{immediate:!0})},data(){return{footer_width:null,tiles:[],screen:{footer:{left:"",center:"",right:""}}}},computed:{cssVars(){return{"--footer-icon-width":`${this.footer_width}px`}}},methods:{fetchTiles(){let e=this.$root.getScreen(this.$route.params.screen);e&&(this.tiles=e.tiles)},updateScreen(){let e=this.$root.getScreen(this.$route.params.screen);!e||(this.screen=e,this.$root.setBgColour(this.screen.backgroundColorRgb))},press(e){switch(e){case"left":this.$root.navigateToUrl("/screen/1");break;case"center":this.$root.navigateToUrl("/");break;case"right":this.$root.navigateToUrl("/config");break}},resizeHandler(){this.footer_width=this.$refs.footerIconWidth.clientHeight*.7}},mounted(){window.addEventListener("resize",this.resizeHandler),this.fetchTiles(),this.updateScreen(),this.resizeHandler();let e={screen:this.$route.params.screen,type:"screen",event:"change",state:"loaded"};this.$root.mqttSend(e)},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},hi=Object.assign(ui,{__name:"ScreenView",setup(e){return(t,i)=>(o(),r(c,null,[n("main",{bp:"grid 6 4@sm 3@md 2@xl",style:m(t.cssVars)},[(o(!0),r(c,null,H(t.tiles,(s,l)=>(o(),r(c,{key:l},[s?(o(),r(c,{key:0},[s.style=="button"?(o(),$(Me,{key:0,tile:s},null,8,["tile"])):h("",!0),s.style=="buttonUpDown"?(o(),$(Ve,{key:1,tile:s},null,8,["tile"])):h("",!0),s.style=="buttonLevelUp"?(o(),$(tt,{key:2,tile:s},null,8,["tile"])):h("",!0),s.style=="buttonLevelDown"?(o(),$(Ae,{key:3,tile:s},null,8,["tile"])):h("",!0),s.style=="buttonLeftRight"?(o(),$(bt,{key:4,tile:s},null,8,["tile"])):h("",!0),s.style=="buttonPrevNext"?(o(),$(Ut,{key:5,tile:s},null,8,["tile"])):h("",!0),s.style=="indicator"?(o(),$(qt,{key:6,tile:s},null,8,["tile"])):h("",!0),s.style=="link"?(o(),$(St,{key:7,tile:s},null,8,["tile"])):h("",!0),s.style=="colorPickerRgb"?(o(),$(Qt,{key:8,tile:s},null,8,["tile"])):h("",!0),s.style=="dropDown"?(o(),$(ni,{key:9,tile:s},null,8,["tile"])):h("",!0)],64)):h("",!0)],64))),128))],4),oi,n("footer",{bp:"grid 4",style:m(t.cssVars)},[t.screen.footer.left?(o(),r("h2",li,d(t.screen.footer.left),1)):(o(),r("button",{key:1,class:"icon icon--before icon-_home",onClick:i[0]||(i[0]=s=>t.press("left"))})),t.screen.footer.center?(o(),r("button",{key:2,onClick:i[1]||(i[1]=s=>t.press("center")),ref:"footerIconWidth"},d(t.screen.footer.center),513)):(o(),r("button",{key:3,onClick:i[2]||(i[2]=s=>t.press("center")),ref:"footerIconWidth"},d(t.screen.label),513)),t.screen.footer.right?(o(),r("h2",ri,d(t.screen.footer.right),1)):(o(),r("button",{key:5,class:"icon icon--before icon-_settings",onClick:i[3]||(i[3]=s=>t.press("right"))}))],4)],64))}});class z{static deg2rad(t){return t*(Math.PI/180)}static rad2deg(t){return t*(180/Math.PI)}static clamp(t,i,s){return Math.min(Math.max(t,i),s)}}class D extends Array{set x(t){this[0]=t}get x(){return this[0]}set y(t){this[1]=t}get y(){return this[1]}add(t){return this.forEach((i,s,l)=>{l[s]+=t[s]}),this}sub(t){return this.forEach((i,s,l)=>{l[s]-=t[s]}),this}mul(t){return this.forEach((i,s,l)=>{l[s]*=t[s]}),this}div(t){return this.forEach((i,s,l)=>{l[s]/=t[s]}),this}sum(){return this.reduce((t,i)=>t+i)}scale(t){return this.map((i,s,l)=>{l[s]*=t}),this}dot(t){return this.clone().mul(t).sum()}len(){return Math.hypot(...this)}normalize(){return this.scale(1/this.len())}negate(){return this.scale(-1)}setLength(t){return this.normalize().scale(t)}rotate(t,i){i=i||!1;const s=this.x,l=this.y,b=i?Math.sin(t):Math.cos(t),a=i?Math.cos(t):Math.sin(t);return this.x=s*b-l*a,this.y=s*a+l*b,this}getAngle(){let t=Math.atan2(this.y,this.x);return(360+Math.round(z.rad2deg(t)))%360}setAngle(t){let i=this.len(),s=z.deg2rad(t);return this.x=Math.cos(s),this.y=Math.sin(s),this.scale(i),this}clone(){return new D(...this)}}class M{static rgb2hsb(t,i,s){t/=255,i/=255,s/=255;const l=Math.max(t,i,s),b=l-Math.min(t,i,s),a=b===0?0:b&&l===t?(i-s)/b:l===i?2+(s-t)/b:4+(t-i)/b;return{h:Math.round(60*(a<0?a+6:a)),s:Math.round(l&&b/l*100),b:Math.round(l*100)}}static hsb2rgb(t,i,s){i/=100,s/=100;const l=a=>(a+t/60)%6,b=a=>s*(1-i*Math.max(0,Math.min(l(a),4-l(a),1)));return{r:Math.round(255*b(5)),g:Math.round(255*b(3)),b:Math.round(255*b(1))}}static vect2hsb(t,i,s){let l=t.getAngle(),b=t.len()/i*100;return{h:l,s:Math.round(b),b:s}}static hsb2vect(t,i,s,l){return s.x=1,s.y=1,s.setLength(i/100*l),s.setAngle(t),s}}const C=e=>(g("data-v-667f1bfc"),e=e(),p(),e),ai=C(()=>n("button",{class:"icon icon--before icon-_rgb"},null,-1)),di=C(()=>n("button",{class:"icon icon--before icon-_cct"},null,-1)),bi=C(()=>n("div",{class:"header-pad"},"\xA0",-1)),vi={class:"colour-wheel",ref:"wheelheight"},ci=C(()=>n("div",{class:"rainbow"},null,-1)),mi=C(()=>n("div",{class:"white"},null,-1)),$i=[ci,mi],gi={class:"puck",ref:"colourPuck"},pi={class:"puck",ref:"brightnessPuck"},fi=C(()=>n("div",{class:"footer-pad"},"\xA0",-1)),wi=C(()=>n("h2",null,"\xA0",-1)),yi={data(){return{wheel_height:null,footer_width:null,drag_event:null,vect1:new D(0,0),vect2:new D(0,0),colour:{h:0,s:0,b:100},sliderColour:{r:255,g:255,b:255}}},computed:{cssVars(){return{"--wheel-height":`${this.wheel_height}px`,"--footer-icon-width":`${this.footer_width}px`,"--puck-colour":`rgb(${this.tile.colorRgb.r}, ${this.tile.colorRgb.g}, ${this.tile.colorRgb.b})`,"--slider-colour":`rgb(${this.sliderColour.r}, ${this.sliderColour.g}, ${this.sliderColour.b})`}}},methods:{mouseDown(e){switch(e){case"back":this.$root.navigateToUrl(`/screen/${this.tile.screen}`);break;case"state":this.buttonState();break;case"colour":this.setColour(window.event),this.drag_event=t=>this.mouseMove(t,e),document.addEventListener("mousemove",this.drag_event),document.addEventListener("touchmove",this.drag_event);break;case"brightness":this.setBrightness(window.event),this.drag_event=t=>this.mouseMove(t,e),document.addEventListener("mousemove",this.drag_event),document.addEventListener("touchmove",this.drag_event);break}},mouseUp(e){switch(e){case"colour":case"brightness":if(!this.drag_event)break;document.removeEventListener("mousemove",this.drag_event),document.removeEventListener("touchmove",this.drag_event),this.drag_event=null,this.buttonColour();break}},mouseMove(e,t){switch(t){case"colour":this.setColour(e);break;case"brightness":this.setBrightness(e);break}},buttonState(){let e={};e.screen=this.tile.screen,e.tile=this.tile.id,e.style=this.tile.style,e.type="button",e.state=this.tile.state,e.event="single",this.$root.mqttSend(e)},buttonColour(){let e={};e.screen=this.tile.screen,e.tile=this.tile.id,e.style=this.tile.style,e.type="colorPicker",e.state={colorRgb:{r:this.tile.colorRgb.r,g:this.tile.colorRgb.g,b:this.tile.colorRgb.b}},e.event="change",this.$root.mqttSend(e)},setColour(e){this.vect2.x=(e.clientX||e.touches[0].clientX)-this.$refs.wheelheight.getBoundingClientRect().left,this.vect2.y=(e.clientY||e.touches[0].clientY)-this.$refs.wheelheight.getBoundingClientRect().top,this.vect2.sub(this.vect1),this.vect2.len()>this.$refs.wheelheight.clientWidth/2&&this.vect2.setLength(this.$refs.wheelheight.clientWidth/2),this.colour=M.vect2hsb(this.vect2,this.$refs.wheelheight.clientWidth/2,this.colour.b),this.tile.colorRgb=M.hsb2rgb(this.colour.h,this.colour.s,this.colour.b),this.sliderColour=M.hsb2rgb(this.colour.h,this.colour.s,100),this.vect2.add(this.vect1),this.$refs.colourPuck.style.left=`${this.vect2.x-this.$refs.colourPuck.clientWidth/2}px`,this.$refs.colourPuck.style.top=`${this.vect2.y-this.$refs.colourPuck.clientHeight/2}px`;let t=this.$refs.brightnessPuck.clientWidth*(this.colour.b/100);this.$refs.brightnessPuck.style.left=`calc(${this.colour.b}% - ${t}px)`},setBrightness(e){let t=(e.clientX||e.touches[0].clientX)-this.$refs.brightnessWidth.getBoundingClientRect().left;this.colour.b=z.clamp(Math.round(t/this.$refs.brightnessWidth.clientWidth*100),0,100),this.tile.colorRgb=M.hsb2rgb(this.colour.h,this.colour.s,this.colour.b);let i=this.$refs.brightnessPuck.clientWidth*(this.colour.b/100);this.$refs.brightnessPuck.style.left=`calc(${this.colour.b}% - ${i}px)`},resizeHandler(){this.wheel_height=this.$refs.wheelheight.clientWidth,this.footer_width=this.$refs.footerIconWidth.clientHeight*.7,this.vect1.x=this.$refs.wheelheight.clientWidth/2,this.vect1.y=this.$refs.wheelheight.clientHeight/2,this.colour=M.rgb2hsb(this.tile.colorRgb.r,this.tile.colorRgb.g,this.tile.colorRgb.b),this.sliderColour=M.hsb2rgb(this.colour.h,this.colour.s,100),this.vect2=M.hsb2vect(this.colour.h,this.colour.s,this.vect2,this.$refs.wheelheight.clientHeight/2),this.vect2.add(this.vect1),this.$refs.colourPuck.style.left=`${this.vect2.x-this.$refs.colourPuck.clientWidth/2}px`,this.$refs.colourPuck.style.top=`${this.vect2.y-this.$refs.colourPuck.clientHeight/2}px`;let e=this.$refs.brightnessPuck.clientWidth*(this.colour.b/100);this.$refs.brightnessPuck.style.left=`calc(${this.colour.b}% - ${e}px)`}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},ki=Object.assign(yi,{__name:"ControlsPickerRgb",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r(c,null,[n("header",{bp:"grid 4",style:m(t.cssVars)},[ai,n("h2",null,d(e.tile.label),1),di],4),n("main",{bp:"container",style:m(t.cssVars)},[bi,n("div",{class:"colour-picker",onMousedown:i[0]||(i[0]=u(s=>t.mouseDown("colour"),["prevent"])),onMouseleave:i[1]||(i[1]=u(s=>t.mouseUp("colour"),["prevent"])),onMouseup:i[2]||(i[2]=u(s=>t.mouseUp("colour"),["prevent"])),onTouchstart:i[3]||(i[3]=u(s=>t.mouseDown("colour"),["prevent"])),onTouchend:i[4]||(i[4]=u(s=>t.mouseUp("colour"),["prevent"]))},[n("div",vi,$i,512),n("div",gi,null,512)],32),n("div",{class:"brightness-slider",ref:"brightnessWidth",onMousedown:i[5]||(i[5]=u(s=>t.mouseDown("brightness"),["prevent"])),onMouseleave:i[6]||(i[6]=u(s=>t.mouseUp("brightness"),["prevent"])),onMouseup:i[7]||(i[7]=u(s=>t.mouseUp("brightness"),["prevent"])),onTouchstart:i[8]||(i[8]=u(s=>t.mouseDown("brightness"),["prevent"])),onTouchend:i[9]||(i[9]=u(s=>t.mouseUp("brightness"),["prevent"]))},[n("div",pi,null,512)],544),fi],4),n("footer",{bp:"grid 4",style:m(t.cssVars)},[n("button",{class:"icon icon--before icon-_left",onClick:i[10]||(i[10]=s=>t.mouseDown("back")),ref:"footerIconWidth"},null,512),wi,n("button",{class:v(`icon icon--before icon-${e.tile.icon}`),onClick:i[11]||(i[11]=s=>t.mouseDown("state"))},null,2)],4)],64))}});var Ui=f(ki,[["__scopeId","data-v-667f1bfc"]]);const Mi=e=>(g("data-v-63093640"),e=e(),p(),e),Ci={bp:"text-center"},Di={class:"logo-before"},zi=["onClick"],Hi=Mi(()=>n("div",{class:"footer-pad"},"\xA0",-1)),Li={data(){return{footer_width:null,items:null}},computed:{cssVars(){return{"--footer-icon-width":`${this.footer_width}px`}}},methods:{mouseDown(e){switch(e){case"back":this.$root.navigateToUrl(`/screen/${this.tile.screen}`);break;default:let t={};t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=this.tile.style,t.state=e,t.event="selection",this.$root.mqttSend(t),this.tile.dropDownSelect=e}},resizeHandler(){this.footer_width=this.$refs.footerIconWidth.clientHeight*.7}},mounted(){this.items=this.tile.dropDownList,window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},Ti=Object.assign(Li,{__name:"ControlsDropDown",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r(c,null,[n("main",{bp:"container",style:m(t.cssVars)},[n("div",Ci,[n("h2",Di,d(e.tile.label),1)]),n("ul",null,[(o(!0),r(c,null,H(t.items,(s,l)=>(o(),r("li",{key:l},[n("button",{onClick:b=>t.mouseDown(l),class:v(e.tile.dropDownSelect==l?"active":"")},d(s),11,zi)]))),128))]),Hi],4),n("footer",{bp:"grid 4",style:m(t.cssVars)},[n("button",{class:"icon icon--before icon-_left",onClick:i[0]||(i[0]=s=>t.mouseDown("back")),ref:"footerIconWidth"},"Back",512)],4)],64))}});var Ii=f(Ti,[["__scopeId","data-v-63093640"]]);const Si={data(){return{tile:{style:null},screen:null}},mounted(){this.screen=this.$root.getScreen(this.$route.params.screen),this.tile=this.screen.getTile(this.$route.params.tile),this.$root.setBgColour({r:0,g:0,b:0})}},_i=Object.assign(Si,{__name:"ControlsView",setup(e){return(t,i)=>(o(),r(c,null,[t.tile.style=="colorPickerRgb"?(o(),$(Ui,{key:0,tile:t.tile},null,8,["tile"])):h("",!0),t.tile.style=="dropDown"?(o(),$(Ii,{key:1,tile:t.tile},null,8,["tile"])):h("",!0)],64))}});const Ri={data(){return{screens:[]}},mounted(){this.screens=this.$root.screens,this.$root.setBgColour({r:0,g:0,b:0})}},Vi=e=>(g("data-v-fca75ce6"),e=e(),p(),e),Bi={bp:"container"},Pi=Vi(()=>n("div",{bp:"text-center"},[n("h2",{class:"logo-before"},"OXRS Touch\xA0Panel")],-1)),Wi={key:0},Ei=["onClick"];function qi(e,t,i,s,l,b){return o(),r("div",Bi,[Pi,n("ul",null,[(o(!0),r(c,null,H(l.screens,(a,E)=>(o(),r(c,{key:E},[a.hidden?h("",!0):(o(),r("li",Wi,[n("button",{onClick:ji=>this.$root.navigateToUrl(`/screen/${a.id}`)},d(a.label),9,Ei)]))],64))),128)),n("li",null,[n("button",{onClick:t[0]||(t[0]=a=>this.$root.navigateToUrl("/config"))},"Settings")])])])}var Oi=f(Ri,[["render",qi],["__scopeId","data-v-fca75ce6"]]);const Ni={__name:"TemplateView",props:{bodyView:{type:String,required:!0}},setup(e){return(t,i)=>(o(),r(c,null,[e.bodyView=="home"?(o(),$(Oi,{key:0})):h("",!0),e.bodyView=="config"?(o(),$(me,{key:1})):h("",!0),e.bodyView=="screen"?(o(),$(hi,{key:2})):h("",!0),e.bodyView=="controls"?(o(),$(_i,{key:3})):h("",!0)],64))}};export{Ni as default};
