import{o,c as r,a as n,t as d,w as k,v as U,b as q,d as a,p as g,e as p,n as b,f as w,F as c,g as u,h as $,r as H,i as m}from"./index.js";var f=(e,t)=>{const i=e.__vccOpts||e;for(const[s,l]of t)i[s]=l;return i};const O={data(){return{host:null,port:null,username:null,password:null,device:null,prefix:null,suffix:null,ssl:null,dt:new Date(this.$root.$version),changed:!1}},watch:{host:{handler:function(e){return this.hasChanged(e,this.$root.host)},deep:!0},port:{handler:function(e){return this.hasChanged(e,this.$root.port)},deep:!0},username:{handler:function(e){return this.hasChanged(e,this.$root.device)},deep:!0},password:{handler:function(e){return this.hasChanged(e,this.$root.username)},deep:!0},device:{handler:function(e){return this.hasChanged(e,this.$root.password)},deep:!0},prefix:{handler:function(e){return this.hasChanged(e,this.$root.prefix)},deep:!0},suffix:{handler:function(e){return this.hasChanged(e,this.$root.suffix)},deep:!0},ssl:{handler:function(e){return this.hasChanged(e,this.$root.ssl)},deep:!0}},methods:{submit(){return this.$root.host=host.value,this.$root.port=port.value,this.$root.device=device.value,this.$root.username=username.value,this.$root.password=password.value,this.$root.prefix=prefix.value,this.$root.suffix=suffix.value,this.$root.ssl=!!ssl.checked,this.$root.connectMqtt(),!1},updateForm(){host.value=this.$root.host,port.value=this.$root.port,username.value=this.$root.username,password.value=this.$root.password,device.value=this.$root.device,prefix.value=this.$root.prefix,suffix.value=this.$root.suffix,ssl.checked=this.$root.ssl},hasChanged(e,t){e!=t&&(this.changed=!0)},fullscreen(){this.$root.toggleFullscreen()},cancel(){this.$root.navigateToUrl("/")}},mounted(){this.updateForm(),this.$root.setBgColour({r:0,g:0,b:0})}},y=e=>(g("data-v-73e638a2"),e=e(),p(),e),j={action:"",bp:"container"},F=y(()=>n("h2",{class:"logo-before"},"MQTT broker\xA0configuration",-1)),N={bp:"grid"},A={bp:"12 9@lg"},X=y(()=>n("label",{for:"host"},"Host: IP address or hostname of your broker's websocket",-1)),Y={bp:"12 3@lg"},G=y(()=>n("label",{for:"port"},"Port:",-1)),Q={bp:"grid"},J={bp:"12 6@lg"},K=y(()=>n("label",{for:"username"},"Username:",-1)),Z={bp:"12 6@lg"},x=y(()=>n("label",{for:"password"},"Password:",-1)),ee={bp:"grid vertical-end"},te={bp:"12 9@lg"},ie=y(()=>n("label",{for:"device"},"Client ID:",-1)),se={bp:"12 3@lg"},ne={for:"ssl",class:"form-checkbox"},oe=y(()=>n("span",{class:"checkmark"},null,-1)),le=y(()=>n("span",{class:"label"},"Enable SSL",-1)),re={bp:"grid"},ue={bp:"12 6@lg"},he=y(()=>n("label",{for:"prefix"},"Topic prefix:",-1)),ae={bp:"12 6@lg"},de=y(()=>n("label",{for:"suffix"},"Topic suffix:",-1));function ve(e,t,i,s,l,v){return o(),r("form",j,[F,n("p",null,"Build: "+d(`${l.dt.getUTCFullYear()}-${l.dt.getUTCMonth()+1}-${l.dt.getUTCDate()} ${l.dt.getUTCHours()}:${l.dt.getUTCMinutes()}:${l.dt.getUTCSeconds()}`)+" UTC",1),n("div",N,[n("div",A,[X,k(n("input",{type:"text",name:"host","onUpdate:modelValue":t[0]||(t[0]=h=>l.host=h),id:"host",placeholder:"192.168.1.123, localhost, xyz.com"},null,512),[[U,l.host]])]),n("div",Y,[G,k(n("input",{type:"text",name:"port","onUpdate:modelValue":t[1]||(t[1]=h=>l.port=h),id:"port",placeholder:"9001"},null,512),[[U,l.port]])])]),n("div",Q,[n("div",J,[K,k(n("input",{type:"text",name:"user","onUpdate:modelValue":t[2]||(t[2]=h=>l.username=h),id:"username"},null,512),[[U,l.username]])]),n("div",Z,[x,k(n("input",{type:"password",name:"password","onUpdate:modelValue":t[3]||(t[3]=h=>l.password=h),id:"password"},null,512),[[U,l.password]])])]),n("div",ee,[n("div",te,[ie,k(n("input",{type:"text",name:"device","onUpdate:modelValue":t[4]||(t[4]=h=>l.device=h),id:"device",placeholder:"TouchPanelWeb"},null,512),[[U,l.device]])]),n("div",se,[n("label",ne,[k(n("input",{type:"checkbox",name:"ssl","onUpdate:modelValue":t[5]||(t[5]=h=>l.ssl=h),id:"ssl",value:"1"},null,512),[[q,l.ssl]]),oe,le])])]),n("div",re,[n("div",ue,[he,k(n("input",{type:"text",name:"prefix","onUpdate:modelValue":t[6]||(t[6]=h=>l.prefix=h),id:"prefix"},null,512),[[U,l.prefix]])]),n("div",ae,[de,k(n("input",{type:"text",name:"suffix","onUpdate:modelValue":t[7]||(t[7]=h=>l.suffix=h),id:"suffix"},null,512),[[U,l.suffix]])])]),n("button",{class:"right icon icon--before icon-_fullscreen",type:"button",onClick:t[8]||(t[8]=(...h)=>v.fullscreen&&v.fullscreen(...h))},"Fullscreen"),!this.$root.mqtt||!this.$root.mqtt.isConnected()||this.changed?(o(),r("button",{key:0,onClick:t[9]||(t[9]=(...h)=>v.submit&&v.submit(...h)),type:"button",class:"submit"},"Connect")):a("",!0),this.$root.mqtt&&this.$root.mqtt.isConnected()?(o(),r("button",{key:1,class:"icon icon--before icon-_left",type:"button",onClick:t[10]||(t[10]=(...h)=>v.cancel&&v.cancel(...h))},"Cancel")):a("",!0)])}var be=f(O,[["render",ve],["__scopeId","data-v-73e638a2"]]);const L=e=>(g("data-v-7a0ec8c0"),e=e(),p(),e),ce=["id"],me=L(()=>n("div",{class:"image"},null,-1)),$e={bp:"12",class:"label"},ge=L(()=>n("br",null,null,-1)),pe={class:"buttons"},fe=["disabled"],we={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval))},mouseUp(){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press():this.interval=500,this.animation="bounce-animation")},mouseHold(){this.hold(),clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation"},press(){let e={};e.screen=this.tile.screen,e.tile=this.tile.id,e.style=this.tile.style,e.type="button",e.state=this.tile.state,e.event="single",this.$root.mqttSend(e)},hold(){let e={};e.screen=this.tile.screen,e.tile=this.tile.id,e.style=this.tile.style,e.type="button",e.state=this.tile.state,e.event="hold",this.$root.mqttSend(e)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},ye=Object.assign(we,{__name:"ButtonDefault",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:b(`tile state-${e.tile.state} button-${e.tile.type} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:$(t.cssVars),ref:"tileheight"},[me,e.tile.icon?(o(),r("div",{key:0,bp:"4",class:b(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):a("",!0),n("div",$e,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[ge,n("span",null,d(e.tile.subLabel),1)],64)):a("",!0)]),n("div",pe,[n("button",{onMousedown:i[0]||(i[0]=(...s)=>t.mouseDown&&t.mouseDown(...s)),onMouseup:i[1]||(i[1]=(...s)=>t.mouseUp&&t.mouseUp(...s)),onMouseout:i[2]||(i[2]=(...s)=>t.mouseUp&&t.mouseUp(...s)),onTouchstart:i[3]||(i[3]=u((...s)=>t.mouseDown&&t.mouseDown(...s),["prevent"])),onTouchend:i[4]||(i[4]=u((...s)=>t.mouseUp&&t.mouseUp(...s),["prevent"])),disabled:!e.tile.enabled},null,40,fe)])],14,ce))}});var T=f(ye,[["__scopeId","data-v-7a0ec8c0"]]);const I=e=>(g("data-v-172a453a"),e=e(),p(),e),ke=["id"],Ue=I(()=>n("div",{class:"image"},null,-1)),Me={bp:"12",class:"label"},Ce=I(()=>n("br",null,null,-1)),ze={class:"buttons"},De=["disabled"],Te=["disabled"],He=["disabled"],Le={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(e){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval,e))},mouseUp(e){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press(e):this.interval=500,this.animation="bounce-animation")},mouseHold(e){this.interval=200,this.hold(e),e=="button"&&(clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation")},press(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e,t.event="single",e){case"button":t.state=this.tile.state;break}this.$root.mqttSend(t)},hold(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e,t.event="hold",e){case"button":t.state=this.tile.state;break}this.$root.mqttSend(t)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},Ie=Object.assign(Le,{__name:"ButtonUpDown",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:b(`tile state-${e.tile.state} button-${e.tile.type} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:$(t.cssVars),ref:"tileheight"},[Ue,e.tile.icon?(o(),r("div",{key:0,bp:"4",class:b(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):a("",!0),n("div",Me,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[Ce,n("span",null,d(e.tile.subLabel),1)],64)):a("",!0)]),n("div",ze,[n("button",{onMousedown:i[0]||(i[0]=s=>t.mouseDown("button")),onMouseup:i[1]||(i[1]=s=>t.mouseUp("button")),onMouseout:i[2]||(i[2]=s=>t.mouseUp("button")),onTouchstart:i[3]||(i[3]=u(s=>t.mouseDown("button"),["prevent"])),onTouchend:i[4]||(i[4]=u(s=>t.mouseUp("button"),["prevent"])),disabled:!e.tile.enabled},null,40,De),n("button",{onMousedown:i[5]||(i[5]=s=>t.mouseDown("up")),onMouseup:i[6]||(i[6]=s=>t.mouseUp("up")),onMouseout:i[7]||(i[7]=s=>t.mouseUp("up")),onTouchstart:i[8]||(i[8]=u(s=>t.mouseDown("up"),["prevent"])),onTouchend:i[9]||(i[9]=u(s=>t.mouseUp("up"),["prevent"])),class:"icon--mask icon-_up",disabled:!e.tile.enabled},null,40,Te),n("button",{onMousedown:i[10]||(i[10]=s=>t.mouseDown("down")),onMouseup:i[11]||(i[11]=s=>t.mouseUp("down")),onMouseout:i[12]||(i[12]=s=>t.mouseUp("down")),onTouchstart:i[13]||(i[13]=u(s=>t.mouseDown("down"),["prevent"])),onTouchend:i[14]||(i[14]=u(s=>t.mouseUp("down"),["prevent"])),class:"icon--mask icon-_down",disabled:!e.tile.enabled},null,40,He)])],14,ke))}});var Se=f(Ie,[["__scopeId","data-v-172a453a"]]);const S=e=>(g("data-v-06f6deac"),e=e(),p(),e),Re=["id"],Ve=S(()=>n("div",{class:"image"},null,-1)),Be=S(()=>n("br",null,null,-1)),Pe={class:"buttons"},We=["disabled"],Ee=["disabled"],_e=["disabled"],qe={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(e){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval,e))},mouseUp(e){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press(e):this.interval=500,this.animation="bounce-animation")},mouseHold(e){this.interval=200,this.hold(e),e=="button"&&(clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation")},press(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e=="button"?"button":"level",t.event=e=="button"?"single":e,e){case"up":this.tile.level=Math.max(this.tile.level-1,this.tile.levelStart),t.state=this.tile.level,this.tile.update({});break;case"down":this.tile.level=Math.min(this.tile.level+1,this.tile.levelStop),t.state=this.tile.level,this.tile.update({});break;default:t.state=this.tile.state;break}this.$root.mqttSend(t)},hold(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e=="button"?"button":"level",t.event=e=="button"?"hold":e,e){case"up":this.tile.level=Math.max(this.tile.level-this.tile.levelPercentStep,this.tile.levelStart),t.state=this.tile.level,this.tile.update({});break;case"down":this.tile.level=Math.min(this.tile.level+this.tile.levelPercentStep,this.tile.levelStop),t.state=this.tile.level,this.tile.update({});break;default:t.state=this.tile.state;break}this.$root.mqttSend(t)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},Oe=Object.assign(qe,{__name:"ButtonLevelDown",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:b(`tile state-${e.tile.state} button-${e.tile.type} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:$(t.cssVars),ref:"tileheight"},[Ve,n("div",{class:"level",style:$({height:e.tile.levelPercent+"%"})},null,4),e.tile.icon?(o(),r("div",{key:0,bp:"4",class:b(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):a("",!0),n("div",{bp:"12",class:b(e.tile.levelPercent<=85?"label invert":"label")},[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[Be,n("span",null,d(e.tile.subLabel),1)],64)):a("",!0)],2),n("div",Pe,[n("button",{onMousedown:i[0]||(i[0]=s=>t.mouseDown("button")),onMouseup:i[1]||(i[1]=s=>t.mouseUp("button")),onMouseout:i[2]||(i[2]=s=>t.mouseUp("button")),onTouchstart:i[3]||(i[3]=u(s=>t.mouseDown("button"),["prevent"])),onTouchend:i[4]||(i[4]=u(s=>t.mouseUp("button"),["prevent"])),disabled:!e.tile.enabled},null,40,We),n("button",{onMousedown:i[5]||(i[5]=s=>t.mouseDown("up")),onMouseup:i[6]||(i[6]=s=>t.mouseUp("up")),onMouseout:i[7]||(i[7]=s=>t.mouseUp("up")),onTouchstart:i[8]||(i[8]=u(s=>t.mouseDown("up"),["prevent"])),onTouchend:i[9]||(i[9]=u(s=>t.mouseUp("up"),["prevent"])),class:"icon--mask icon-_up",disabled:!e.tile.enabled},null,40,Ee),n("button",{onMousedown:i[10]||(i[10]=s=>t.mouseDown("down")),onMouseup:i[11]||(i[11]=s=>t.mouseUp("down")),onMouseout:i[12]||(i[12]=s=>t.mouseUp("down")),onTouchstart:i[13]||(i[13]=u(s=>t.mouseDown("down"),["prevent"])),onTouchend:i[14]||(i[14]=u(s=>t.mouseUp("down"),["prevent"])),class:"icon--mask icon-_down",disabled:!e.tile.enabled},null,40,_e)])],14,Re))}});var je=f(Oe,[["__scopeId","data-v-06f6deac"]]);const R=e=>(g("data-v-f0c2c646"),e=e(),p(),e),Fe=["id"],Ne=R(()=>n("div",{class:"image"},null,-1)),Ae=R(()=>n("br",null,null,-1)),Xe={class:"buttons"},Ye=["disabled"],Ge=["disabled"],Qe=["disabled"],Je={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(e){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval,e))},mouseUp(e){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press(e):this.interval=500,this.animation="bounce-animation")},mouseHold(e){this.interval=200,this.hold(e),e=="button"&&(clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation")},press(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e=="button"?"button":"level",t.event=e=="button"?"single":e,e){case"up":this.tile.level=Math.min(this.tile.level+1,this.tile.levelStop),t.state=this.tile.level,this.tile.update({});break;case"down":this.tile.level=Math.max(this.tile.level-1,this.tile.levelStart),t.state=this.tile.level,this.tile.update({});break;default:t.state=this.tile.state;break}this.$root.mqttSend(t)},hold(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e=="button"?"button":"level",t.event=e=="button"?"hold":e,e){case"up":this.tile.level=Math.min(this.tile.level+this.tile.levelPercentStep,this.tile.levelStop),t.state=this.tile.level,this.tile.update({});break;case"down":this.tile.level=Math.max(this.tile.level-this.tile.levelPercentStep,this.tile.levelStart),t.state=this.tile.level,this.tile.update({});break;default:t.state=this.tile.state;break}this.$root.mqttSend(t)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},Ke=Object.assign(Je,{__name:"ButtonLevelUp",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:b(`tile state-${e.tile.state} button-${e.tile.type} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:$(t.cssVars),ref:"tileheight"},[Ne,n("div",{class:"level",style:$({height:e.tile.levelPercent+"%"})},null,4),e.tile.icon?(o(),r("div",{key:0,bp:"4",class:b(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):a("",!0),n("div",{bp:"12",class:b(e.tile.levelPercent<=10?"label invert":"label")},[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[Ae,n("span",null,d(e.tile.subLabel),1)],64)):a("",!0)],2),n("div",Xe,[n("button",{onMousedown:i[0]||(i[0]=s=>t.mouseDown("button")),onMouseup:i[1]||(i[1]=s=>t.mouseUp("button")),onMouseout:i[2]||(i[2]=s=>t.mouseUp("button")),onTouchstart:i[3]||(i[3]=u(s=>t.mouseDown("button"),["prevent"])),onTouchend:i[4]||(i[4]=u(s=>t.mouseUp("button"),["prevent"])),disabled:!e.tile.enabled},null,40,Ye),n("button",{onMousedown:i[5]||(i[5]=s=>t.mouseDown("up")),onMouseup:i[6]||(i[6]=s=>t.mouseUp("up")),onMouseout:i[7]||(i[7]=s=>t.mouseUp("up")),onTouchstart:i[8]||(i[8]=u(s=>t.mouseDown("up"),["prevent"])),onTouchend:i[9]||(i[9]=u(s=>t.mouseUp("up"),["prevent"])),class:"icon--mask icon-_up",disabled:!e.tile.enabled},null,40,Ge),n("button",{onMousedown:i[10]||(i[10]=s=>t.mouseDown("down")),onMouseup:i[11]||(i[11]=s=>t.mouseUp("down")),onMouseout:i[12]||(i[12]=s=>t.mouseUp("down")),onTouchstart:i[13]||(i[13]=u(s=>t.mouseDown("down"),["prevent"])),onTouchend:i[14]||(i[14]=u(s=>t.mouseUp("down"),["prevent"])),class:"icon--mask icon-_down",disabled:!e.tile.enabled},null,40,Qe)])],14,Fe))}});var Ze=f(Ke,[["__scopeId","data-v-f0c2c646"]]);const V=e=>(g("data-v-2c668a44"),e=e(),p(),e),xe=["id"],et=V(()=>n("div",{class:"image"},null,-1)),tt={bp:"12",class:"label"},it=V(()=>n("br",null,null,-1)),st={class:"buttons"},nt=["disabled"],ot=["disabled"],lt=["disabled"],rt={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(e){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval,e))},mouseUp(e){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press(e):this.interval=500,this.animation="bounce-animation")},mouseHold(e){this.interval=200,this.hold(e),e=="button"&&(clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation")},press(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e,t.event="single",e){case"button":t.state=this.tile.state;break}this.$root.mqttSend(t)},hold(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e,t.event="hold",e){case"button":t.state=this.tile.state;break}this.$root.mqttSend(t)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},ut=Object.assign(rt,{__name:"ButtonLeftRight",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:b(`tile state-${e.tile.state} button-${e.tile.type} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:$(t.cssVars),ref:"tileheight"},[et,e.tile.icon?(o(),r("div",{key:0,bp:"4",class:b(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):a("",!0),n("div",tt,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[it,n("span",null,d(e.tile.subLabel),1)],64)):a("",!0)]),n("div",st,[n("button",{onMousedown:i[0]||(i[0]=s=>t.mouseDown("button")),onMouseup:i[1]||(i[1]=s=>t.mouseUp("button")),onMouseout:i[2]||(i[2]=s=>t.mouseUp("button")),onTouchstart:i[3]||(i[3]=u(s=>t.mouseDown("button"),["prevent"])),onTouchend:i[4]||(i[4]=u(s=>t.mouseUp("button"),["prevent"])),disabled:!e.tile.enabled},null,40,nt),n("button",{onMousedown:i[5]||(i[5]=s=>t.mouseDown("left")),onMouseup:i[6]||(i[6]=s=>t.mouseUp("left")),onMouseout:i[7]||(i[7]=s=>t.mouseUp("left")),onTouchstart:i[8]||(i[8]=u(s=>t.mouseDown("left"),["prevent"])),onTouchend:i[9]||(i[9]=u(s=>t.mouseUp("left"),["prevent"])),class:"icon--mask icon-_left",disabled:!e.tile.enabled},null,40,ot),n("button",{onMousedown:i[10]||(i[10]=s=>t.mouseDown("right")),onMouseup:i[11]||(i[11]=s=>t.mouseUp("right")),onMouseout:i[12]||(i[12]=s=>t.mouseUp("right")),onTouchstart:i[13]||(i[13]=u(s=>t.mouseDown("right"),["prevent"])),onTouchend:i[14]||(i[14]=u(s=>t.mouseUp("right"),["prevent"])),class:"icon--mask icon-_right",disabled:!e.tile.enabled},null,40,lt)])],14,xe))}});var ht=f(ut,[["__scopeId","data-v-2c668a44"]]);const B=e=>(g("data-v-6b601b4c"),e=e(),p(),e),at=["id"],dt=B(()=>n("div",{class:"image"},null,-1)),vt={bp:"12",class:"label"},bt=B(()=>n("br",null,null,-1)),ct={class:"buttons"},mt=["disabled"],$t=["disabled"],gt=["disabled"],pt={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(e){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval,e))},mouseUp(e){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press(e):this.interval=500,this.animation="bounce-animation")},mouseHold(e){this.interval=200,this.hold(e),e=="button"&&(clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation")},press(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e,t.event="single",e){case"button":t.state=this.tile.state;break}this.$root.mqttSend(t)},hold(e){let t={};switch(t.screen=this.tile.screen,t.tile=this.tile.id,t.style=this.tile.style,t.type=e,t.event="hold",e){case"button":t.state=this.tile.state;break}this.$root.mqttSend(t)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},ft=Object.assign(pt,{__name:"ButtonPrevNext",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:b(`tile state-${e.tile.state} button-${e.tile.type} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:$(t.cssVars),ref:"tileheight"},[dt,e.tile.icon?(o(),r("div",{key:0,bp:"4",class:b(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):a("",!0),n("div",vt,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[bt,n("span",null,d(e.tile.subLabel),1)],64)):a("",!0)]),n("div",ct,[n("button",{onMousedown:i[0]||(i[0]=s=>t.mouseDown("button")),onMouseup:i[1]||(i[1]=s=>t.mouseUp("button")),onMouseout:i[2]||(i[2]=s=>t.mouseUp("button")),onTouchstart:i[3]||(i[3]=u(s=>t.mouseDown("button"),["prevent"])),onTouchend:i[4]||(i[4]=u(s=>t.mouseUp("button"),["prevent"])),disabled:!e.tile.enabled},null,40,mt),n("button",{onMousedown:i[5]||(i[5]=s=>t.mouseDown("prev")),onMouseup:i[6]||(i[6]=s=>t.mouseUp("prev")),onMouseout:i[7]||(i[7]=s=>t.mouseUp("prev")),onTouchstart:i[8]||(i[8]=u(s=>t.mouseDown("up"),["prevent"])),onTouchend:i[9]||(i[9]=u(s=>t.mouseUp("up"),["prevent"])),class:"icon--mask icon-_prev",disabled:!e.tile.enabled},null,40,$t),n("button",{onMousedown:i[10]||(i[10]=s=>t.mouseDown("next")),onMouseup:i[11]||(i[11]=s=>t.mouseUp("next")),onMouseout:i[12]||(i[12]=s=>t.mouseUp("next")),onTouchstart:i[13]||(i[13]=u(s=>t.mouseDown("down"),["prevent"])),onTouchend:i[14]||(i[14]=u(s=>t.mouseUp("down"),["prevent"])),class:"icon--mask icon-_next",disabled:!e.tile.enabled},null,40,gt)])],14,at))}});var wt=f(ft,[["__scopeId","data-v-6b601b4c"]]);const P=e=>(g("data-v-2815849a"),e=e(),p(),e),yt=["id"],kt=P(()=>n("div",{class:"image"},null,-1)),Ut={bp:"12",class:"label"},Mt=P(()=>n("br",null,null,-1)),Ct={class:"buttons"},zt=["disabled"],Dt={data(){return{tile_height:null,icon_height:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{press(){!this.tile.enabled||this.$root.navigateToUrl(`/screen/${this.tile.link}`)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},Tt=Object.assign(Dt,{__name:"ButtonLink",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:b(`tile state-${e.tile.state} button-${e.tile.type} enabled-${e.tile.enabled}`),id:e.tile.id,style:$(t.cssVars),ref:"tileheight"},[kt,e.tile.icon?(o(),r("div",{key:0,bp:"4",class:b(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):a("",!0),n("div",Ut,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[Mt,n("span",null,d(e.tile.subLabel),1)],64)):a("",!0)]),n("div",Ct,[n("button",{onClick:i[0]||(i[0]=(...s)=>t.press&&t.press(...s)),class:"icon--mask icon-_right",disabled:!e.tile.enabled},null,8,zt)])],14,yt))}});var Ht=f(Tt,[["__scopeId","data-v-2815849a"]]);const W=e=>(g("data-v-5a482481"),e=e(),p(),e),Lt=["id"],It=W(()=>n("div",{class:"image"},null,-1)),St={bp:"12",class:"indicator"},Rt={bp:"12",class:"label"},Vt=W(()=>n("br",null,null,-1)),Bt={data(){return{tile_height:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`}}},methods:{resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},Pt=Object.assign(Bt,{__name:"ButtonIndicator",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:b(`tile state-${e.tile.state} button-${e.tile.type} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,ref:"tileheight"},[It,n("div",St,[n("h1",null,[w(d(e.tile.value),1),n("sup",null,d(e.tile.units),1)]),n("h2",null,[w(d(e.tile.subValue),1),n("sup",null,d(e.tile.subUnits),1)])]),n("div",Rt,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[Vt,n("span",null,d(e.tile.subLabel),1)],64)):a("",!0)])],10,Lt))}});var Wt=f(Pt,[["__scopeId","data-v-5a482481"]]);const E=e=>(g("data-v-84a97514"),e=e(),p(),e),Et=["id"],_t=E(()=>n("div",{class:"image"},null,-1)),qt={bp:"12",class:"label"},Ot=E(()=>n("br",null,null,-1)),jt={class:"buttons"},Ft=["disabled"],Nt={data(){return{timer:null,interval:500,tile_height:null,icon_height:null,animation:null}},computed:{cssVars(){return{"--icon-color":`rgb(${this.tile.iconColorRgb.r},${this.tile.iconColorRgb.g},${this.tile.iconColorRgb.b})`,"--tile-height":`${this.tile_height}px`,"--icon-height":`${this.icon_height}px`}}},methods:{mouseDown(){!this.tile.enabled||(this.animation="press-animation",this.timer=setInterval(this.mouseHold,this.interval))},mouseUp(){!this.timer||(clearInterval(this.timer),this.timer=null,this.interval==500?this.press():this.interval=500,this.animation="bounce-animation")},mouseHold(){this.hold(),clearInterval(this.timer),this.timer=null,this.interval=500,this.animation="bounce-animation"},press(){this.$root.navigateToUrl(`/screen/${this.tile.screen}/tile/${this.tile.id}/controls`)},hold(){let e={};e.screen=this.tile.screen,e.tile=this.tile.id,e.style=this.tile.style,e.type="button",e.state=this.tile.state,e.event="hold",this.$root.mqttSend(e)},resizeHandler(){this.tile_height=this.$refs.tileheight.clientWidth,this.icon_height=this.$refs.iconheight.clientWidth}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},At=Object.assign(Nt,{__name:"ButtonPickerRgb",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r("div",{bp:"grid vertical-start",class:b(`tile state-${e.tile.state} button-${e.tile.type} enabled-${e.tile.enabled} ${t.animation}`),id:e.tile.id,style:$(t.cssVars),ref:"tileheight"},[_t,e.tile.icon?(o(),r("div",{key:0,bp:"4",class:b(`icon icon--mask icon-${e.tile.icon}`),ref:"iconheight"},null,2)):a("",!0),n("div",qt,[w(d(e.tile.label)+" ",1),e.tile.subLabel?(o(),r(c,{key:0},[Ot,n("span",null,d(e.tile.subLabel),1)],64)):a("",!0)]),n("div",jt,[n("button",{onMousedown:i[0]||(i[0]=(...s)=>t.mouseDown&&t.mouseDown(...s)),onMouseup:i[1]||(i[1]=(...s)=>t.mouseUp&&t.mouseUp(...s)),onMouseout:i[2]||(i[2]=(...s)=>t.mouseUp&&t.mouseUp(...s)),onTouchstart:i[3]||(i[3]=u((...s)=>t.mouseDown&&t.mouseDown(...s),["prevent"])),onTouchend:i[4]||(i[4]=u((...s)=>t.mouseUp&&t.mouseUp(...s),["prevent"])),disabled:!e.tile.enabled},null,40,Ft)])],14,Et))}});var Xt=f(At,[["__scopeId","data-v-84a97514"]]);const Yt=n("div",{class:"footer-pad"},"\xA0",-1),Gt={key:0},Qt={key:4},Jt={created(){this.$watch(()=>this.$route.params,()=>{this.fetchTiles(),this.updateScreen()},{immediate:!0}),this.$watch(()=>this.$root.screens[this.$route.params.screen],()=>{this.fetchTiles()},{immediate:!0})},data(){return{footer_width:null,tiles:[],screen:{footer:{left:"",center:"",right:""}}}},computed:{cssVars(){return{"--footer-icon-width":`${this.footer_width}px`}}},methods:{fetchTiles(){let e=this.$root.getScreen(this.$route.params.screen);e&&(this.tiles=e.tiles)},updateScreen(){let e=this.$root.getScreen(this.$route.params.screen);!e||(this.screen=e,this.$root.setBgColour(this.screen.backgroundColorRgb))},press(e){switch(e){case"left":this.$root.navigateToUrl("/screen/1");break;case"center":this.$root.navigateToUrl("/");break;case"right":this.$root.navigateToUrl("/config");break}},resizeHandler(){this.footer_width=this.$refs.footerIconWidth.clientHeight*.7}},mounted(){window.addEventListener("resize",this.resizeHandler),this.fetchTiles(),this.updateScreen(),this.resizeHandler();let e={screen:this.$route.params.screen,type:"screen",event:"change",state:"loaded"};this.$root.mqttSend(e)},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},Kt=Object.assign(Jt,{__name:"ScreenView",setup(e){return(t,i)=>(o(),r(c,null,[n("main",{bp:"grid 6 4@sm 3@md 2@xl",style:$(t.cssVars)},[(o(!0),r(c,null,H(t.tiles,(s,l)=>(o(),r(c,{key:l},[s?(o(),r(c,{key:0},[s.style=="button"?(o(),m(T,{key:0,tile:s},null,8,["tile"])):a("",!0),s.style=="buttonUpDown"?(o(),m(Se,{key:1,tile:s},null,8,["tile"])):a("",!0),s.style=="buttonLevelUp"?(o(),m(Ze,{key:2,tile:s},null,8,["tile"])):a("",!0),s.style=="buttonLevelDown"?(o(),m(je,{key:3,tile:s},null,8,["tile"])):a("",!0),s.style=="buttonLeftRight"?(o(),m(ht,{key:4,tile:s},null,8,["tile"])):a("",!0),s.style=="buttonPrevNext"?(o(),m(wt,{key:5,tile:s},null,8,["tile"])):a("",!0),s.style=="indicator"?(o(),m(Wt,{key:6,tile:s},null,8,["tile"])):a("",!0),s.style=="dropDown"?(o(),m(T,{key:7,tile:s},null,8,["tile"])):a("",!0),s.style=="link"?(o(),m(Ht,{key:8,tile:s},null,8,["tile"])):a("",!0),s.style=="colorPickerRgb"?(o(),m(Xt,{key:9,tile:s},null,8,["tile"])):a("",!0)],64)):a("",!0)],64))),128))],4),Yt,n("footer",{bp:"grid 4",style:$(t.cssVars)},[t.screen.footer.left?(o(),r("h2",Gt,d(t.screen.footer.left),1)):(o(),r("button",{key:1,class:"icon icon--before icon-_home",onClick:i[0]||(i[0]=s=>t.press("left"))})),t.screen.footer.center?(o(),r("button",{key:2,onClick:i[1]||(i[1]=s=>t.press("center")),ref:"footerIconWidth"},d(t.screen.footer.center),513)):(o(),r("button",{key:3,onClick:i[2]||(i[2]=s=>t.press("center")),ref:"footerIconWidth"},d(t.screen.label),513)),t.screen.footer.right?(o(),r("h2",Qt,d(t.screen.footer.right),1)):(o(),r("button",{key:5,class:"icon icon--before icon-_settings",onClick:i[3]||(i[3]=s=>t.press("right"))}))],4)],64))}});class D{static deg2rad(t){return t*(Math.PI/180)}static rad2deg(t){return t*(180/Math.PI)}static clamp(t,i,s){return Math.min(Math.max(t,i),s)}}class z extends Array{set x(t){this[0]=t}get x(){return this[0]}set y(t){this[1]=t}get y(){return this[1]}add(t){return this.forEach((i,s,l)=>{l[s]+=t[s]}),this}sub(t){return this.forEach((i,s,l)=>{l[s]-=t[s]}),this}mul(t){return this.forEach((i,s,l)=>{l[s]*=t[s]}),this}div(t){return this.forEach((i,s,l)=>{l[s]/=t[s]}),this}sum(){return this.reduce((t,i)=>t+i)}scale(t){return this.map((i,s,l)=>{l[s]*=t}),this}dot(t){return this.clone().mul(t).sum()}len(){return Math.hypot(...this)}normalize(){return this.scale(1/this.len())}negate(){return this.scale(-1)}setLength(t){return this.normalize().scale(t)}rotate(t,i){i=i||!1;const s=this.x,l=this.y,v=i?Math.sin(t):Math.cos(t),h=i?Math.cos(t):Math.sin(t);return this.x=s*v-l*h,this.y=s*h+l*v,this}getAngle(){let t=Math.atan2(this.y,this.x);return(360+Math.round(D.rad2deg(t)))%360}setAngle(t){let i=this.len(),s=D.deg2rad(t);return this.x=Math.cos(s),this.y=Math.sin(s),this.scale(i),this}clone(){return new z(...this)}}class M{static rgb2hsb(t,i,s){t/=255,i/=255,s/=255;const l=Math.max(t,i,s),v=l-Math.min(t,i,s),h=v===0?0:v&&l===t?(i-s)/v:l===i?2+(s-t)/v:4+(t-i)/v;return{h:Math.round(60*(h<0?h+6:h)),s:Math.round(l&&v/l*100),b:Math.round(l*100)}}static hsb2rgb(t,i,s){i/=100,s/=100;const l=h=>(h+t/60)%6,v=h=>s*(1-i*Math.max(0,Math.min(l(h),4-l(h),1)));return{r:Math.round(255*v(5)),g:Math.round(255*v(3)),b:Math.round(255*v(1))}}static vect2hsb(t,i,s){let l=t.getAngle(),v=t.len()/i*100;return{h:l,s:Math.round(v),b:s}}static hsb2vect(t,i,s,l){return s.x=1,s.y=1,s.setLength(i/100*l),s.setAngle(t),s}}const C=e=>(g("data-v-5085d89b"),e=e(),p(),e),Zt=C(()=>n("button",{class:"icon icon--before icon-_rgb"},null,-1)),xt=C(()=>n("button",{class:"icon icon--before icon-_cct"},null,-1)),ei=C(()=>n("div",{class:"header-pad"},"\xA0",-1)),ti={class:"colour-wheel",ref:"wheelheight"},ii=C(()=>n("div",{class:"rainbow"},null,-1)),si=C(()=>n("div",{class:"white"},null,-1)),ni=[ii,si],oi={class:"puck",ref:"colourPuck"},li={class:"puck",ref:"brightnessPuck"},ri=C(()=>n("div",{class:"footer-pad"},"\xA0",-1)),ui=C(()=>n("h2",null,"\xA0",-1)),hi={data(){return{wheel_height:null,footer_width:null,drag_event:null,vect1:new z(0,0),vect2:new z(0,0),colour:{h:0,s:0,b:100},sliderColour:{r:255,g:255,b:255}}},computed:{cssVars(){return{"--wheel-height":`${this.wheel_height}px`,"--footer-icon-width":`${this.footer_width}px`,"--puck-colour":`rgb(${this.tile.colorRgb.r}, ${this.tile.colorRgb.g}, ${this.tile.colorRgb.b})`,"--slider-colour":`rgb(${this.sliderColour.r}, ${this.sliderColour.g}, ${this.sliderColour.b})`}}},methods:{mouseDown(e){switch(e){case"back":this.buttonBack();break;case"state":this.buttonState();break;case"colour":this.setColour(window.event),this.drag_event=t=>this.mouseMove(t,e),document.addEventListener("mousemove",this.drag_event),document.addEventListener("touchmove",this.drag_event);break;case"brightness":this.setBrightness(window.event),this.drag_event=t=>this.mouseMove(t,e),document.addEventListener("mousemove",this.drag_event),document.addEventListener("touchmove",this.drag_event);break}},mouseUp(e){switch(e){case"colour":case"brightness":if(!this.drag_event)break;document.removeEventListener("mousemove",this.drag_event),document.removeEventListener("touchmove",this.drag_event),this.drag_event=null,this.buttonColour();break}},mouseMove(e,t){switch(t){case"colour":this.setColour(e);break;case"brightness":this.setBrightness(e);break}},buttonBack(){this.$root.navigateToUrl(`/screen/${this.tile.screen}`)},buttonState(){let e={};e.screen=this.tile.screen,e.tile=this.tile.id,e.style=this.tile.style,e.type="button",e.state=this.tile.state,e.event="single",this.$root.mqttSend(e)},buttonColour(){let e={};e.screen=this.tile.screen,e.tile=this.tile.id,e.style=this.tile.style,e.type="colorPicker",e.state={colorRgb:{r:this.tile.colorRgb.r,g:this.tile.colorRgb.g,b:this.tile.colorRgb.b}},e.event="change",this.$root.mqttSend(e)},setColour(e){this.vect2.x=(e.clientX||e.touches[0].clientX)-this.$refs.wheelheight.getBoundingClientRect().left,this.vect2.y=(e.clientY||e.touches[0].clientY)-this.$refs.wheelheight.getBoundingClientRect().top,this.vect2.sub(this.vect1),this.vect2.len()>this.$refs.wheelheight.clientWidth/2&&this.vect2.setLength(this.$refs.wheelheight.clientWidth/2),this.colour=M.vect2hsb(this.vect2,this.$refs.wheelheight.clientWidth/2,this.colour.b),this.tile.colorRgb=M.hsb2rgb(this.colour.h,this.colour.s,this.colour.b),this.sliderColour=M.hsb2rgb(this.colour.h,this.colour.s,100),this.vect2.add(this.vect1),this.$refs.colourPuck.style.left=`${this.vect2.x-this.$refs.colourPuck.clientWidth/2}px`,this.$refs.colourPuck.style.top=`${this.vect2.y-this.$refs.colourPuck.clientHeight/2}px`,this.$refs.brightnessPuck.style.left=`calc(${this.colour.b}% - ${this.$refs.brightnessPuck.clientWidth}px)`},setBrightness(e){let t=(e.clientX||e.touches[0].clientX)-this.$refs.brightnessWidth.getBoundingClientRect().left;this.colour.b=D.clamp(Math.round(t/this.$refs.brightnessWidth.clientWidth*100),0,100),this.tile.colorRgb=M.hsb2rgb(this.colour.h,this.colour.s,this.colour.b);let i=this.$refs.brightnessPuck.clientWidth*(this.colour.b/100);this.$refs.brightnessPuck.style.left=`calc(${this.colour.b}% - ${i}px)`},resizeHandler(){this.wheel_height=this.$refs.wheelheight.clientWidth,this.footer_width=this.$refs.footerIconWidth.clientHeight*.7,this.vect1.x=this.$refs.wheelheight.clientWidth/2,this.vect1.y=this.$refs.wheelheight.clientHeight/2,this.colour=M.rgb2hsb(this.tile.colorRgb.r,this.tile.colorRgb.g,this.tile.colorRgb.b),this.sliderColour=M.hsb2rgb(this.colour.h,this.colour.s,100),this.vect2=M.hsb2vect(this.colour.h,this.colour.s,this.vect2,this.$refs.wheelheight.clientHeight/2),this.vect2.add(this.vect1),this.$refs.colourPuck.style.left=`${this.vect2.x-this.$refs.colourPuck.clientWidth/2}px`,this.$refs.colourPuck.style.top=`${this.vect2.y-this.$refs.colourPuck.clientHeight/2}px`;let e=this.$refs.brightnessPuck.clientWidth*(this.colour.b/100);this.$refs.brightnessPuck.style.left=`calc(${this.colour.b}% - ${e}px)`}},mounted(){window.addEventListener("resize",this.resizeHandler),this.resizeHandler()},unmounted(){window.removeEventListener("resize",this.resizeHandler)}},ai=Object.assign(hi,{__name:"ControlsPickerRgb",props:{tile:{type:Object,required:!0}},setup(e){return(t,i)=>(o(),r(c,null,[n("header",{bp:"grid 4",style:$(t.cssVars)},[Zt,n("h2",null,d(e.tile.label),1),xt],4),n("main",{bp:"container",style:$(t.cssVars)},[ei,n("div",{class:"colour-picker",onMousedown:i[0]||(i[0]=u(s=>t.mouseDown("colour"),["prevent"])),onMouseleave:i[1]||(i[1]=u(s=>t.mouseUp("colour"),["prevent"])),onMouseup:i[2]||(i[2]=u(s=>t.mouseUp("colour"),["prevent"])),onTouchstart:i[3]||(i[3]=u(s=>t.mouseDown("colour"),["prevent"])),onTouchend:i[4]||(i[4]=u(s=>t.mouseUp("colour"),["prevent"]))},[n("div",ti,ni,512),n("div",oi,null,512)],32),n("div",{class:"brightness-slider",ref:"brightnessWidth",onMousedown:i[5]||(i[5]=u(s=>t.mouseDown("brightness"),["prevent"])),onMouseleave:i[6]||(i[6]=u(s=>t.mouseUp("brightness"),["prevent"])),onMouseup:i[7]||(i[7]=u(s=>t.mouseUp("brightness"),["prevent"])),onTouchstart:i[8]||(i[8]=u(s=>t.mouseDown("brightness"),["prevent"])),onTouchend:i[9]||(i[9]=u(s=>t.mouseUp("brightness"),["prevent"]))},[n("div",li,null,512)],544),ri],4),n("footer",{bp:"grid 4",style:$(t.cssVars)},[n("button",{class:"icon icon--before icon-_left",onClick:i[10]||(i[10]=s=>t.mouseDown("back")),ref:"footerIconWidth"},null,512),ui,n("button",{class:b(`icon icon--before icon-${e.tile.icon}`),onClick:i[11]||(i[11]=s=>t.mouseDown("state"))},null,2)],4)],64))}});var di=f(ai,[["__scopeId","data-v-5085d89b"]]);const vi={data(){return{tile:{style:null},screen:null}},mounted(){this.screen=this.$root.getScreen(this.$route.params.screen),this.tile=this.screen.getTile(this.$route.params.tile),this.$root.setBgColour({r:0,g:0,b:0})}},bi=Object.assign(vi,{__name:"ControlsView",setup(e){return(t,i)=>t.tile.style=="colorPickerRgb"?(o(),m(di,{key:0,tile:t.tile},null,8,["tile"])):a("",!0)}});const ci={data(){return{screens:[]}},mounted(){this.screens=this.$root.screens,this.$root.setBgColour({r:0,g:0,b:0})}},mi=e=>(g("data-v-f6631084"),e=e(),p(),e),$i={bp:"container"},gi=mi(()=>n("div",{bp:"text-center"},[n("h2",{class:"logo-before"},"OXRS Touch\xA0Panel")],-1)),pi={key:0},fi=["onClick"];function wi(e,t,i,s,l,v){return o(),r("div",$i,[gi,n("ul",null,[(o(!0),r(c,null,H(l.screens,(h,_)=>(o(),r(c,{key:_},[h.hidden?a("",!0):(o(),r("li",pi,[n("button",{onClick:ki=>this.$root.navigateToUrl(`/screen/${h.id}`)},d(h.label),9,fi)]))],64))),128)),n("li",null,[n("button",{onClick:t[0]||(t[0]=h=>this.$root.navigateToUrl("/config"))},"Settings")])])])}var yi=f(ci,[["render",wi],["__scopeId","data-v-f6631084"]]);const Mi={__name:"TemplateView",props:{bodyView:{type:String,required:!0}},setup(e){return(t,i)=>(o(),r(c,null,[e.bodyView=="home"?(o(),m(yi,{key:0})):a("",!0),e.bodyView=="config"?(o(),m(be,{key:1})):a("",!0),e.bodyView=="screen"?(o(),m(Kt,{key:2})):a("",!0),e.bodyView=="controls"?(o(),m(bi,{key:3})):a("",!0)],64))}};export{Mi as default};
